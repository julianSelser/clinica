--   -------------------------------------------------- 
--   Generated by Enterprise Architect Version 8.0.856
--   Created On : viernes, 11 octubre, 2013 
--   DBMS       : SQL Server 2008 
--   -------------------------------------------------- 

USE [GD2C2013]
GO

/*
--  Drop Foreign Key Constraints 

ALTER TABLE CUATRO_QUESOS.Afiliados DROP CONSTRAINT FK_Nro_Conyuge

ALTER TABLE CUATRO_QUESOS.Afiliados DROP CONSTRAINT FK_Nro_Titular

ALTER TABLE CUATRO_QUESOS.Bonos DROP CONSTRAINT FK_Bonos_Afiliados

ALTER TABLE CUATRO_QUESOS.Bonos DROP CONSTRAINT FK_Bonos_Compra

ALTER TABLE CUATRO_QUESOS.Bonos DROP CONSTRAINT FK_Bonos_Planes_Medicos

ALTER TABLE CUATRO_QUESOS.Bonos_Consulta DROP CONSTRAINT FK_Bonos_Consulta_Bonos

ALTER TABLE CUATRO_QUESOS.Bonos_Farmacia DROP CONSTRAINT FK_Bonos_Farmacia_Bonos

ALTER TABLE CUATRO_QUESOS.Bonos_Planes_Habilitados DROP CONSTRAINT FK_Bonos_Planes_Habilitados_Bonos

ALTER TABLE CUATRO_QUESOS.Bonos_Planes_Habilitados DROP CONSTRAINT FK_Bonos_Planes_Habilitados_Planes_Medicos

ALTER TABLE CUATRO_QUESOS.Cambios_Plan DROP CONSTRAINT FK_Afiliado

ALTER TABLE CUATRO_QUESOS.Cambios_Plan DROP CONSTRAINT FK_Plan_Destino

ALTER TABLE CUATRO_QUESOS.Cambios_Plan DROP CONSTRAINT FK_Plan_Origen

ALTER TABLE CUATRO_QUESOS.Compra DROP CONSTRAINT FK_Compra_Afiliados

ALTER TABLE CUATRO_QUESOS.Consultas DROP CONSTRAINT FK_Consultas_Turnos

ALTER TABLE CUATRO_QUESOS.Dias_Atencion DROP CONSTRAINT FK_Dias_Atencion_Medicos

ALTER TABLE CUATRO_QUESOS.Especialidades DROP CONSTRAINT FK_Especialidades_Tipos_Especialidades

ALTER TABLE CUATRO_QUESOS.Especialidades_Medicos DROP CONSTRAINT FK_Especialidades_Medicos_Especialidades

ALTER TABLE CUATRO_QUESOS.Especialidades_Medicos DROP CONSTRAINT FK_Especialidades_Medicos_Medicos

ALTER TABLE CUATRO_QUESOS.Medicamentos_Por_Consulta DROP CONSTRAINT FK_Medicamentos_Por_Consulta_Bonos_Farmacia

ALTER TABLE CUATRO_QUESOS.Medicamentos_Por_Consulta DROP CONSTRAINT FK_Medicamentos_Por_Consulta_Consultas

ALTER TABLE CUATRO_QUESOS.Medicamentos_Por_Consulta DROP CONSTRAINT FK_Medicamentos_Por_Consulta_Medicamentos

ALTER TABLE CUATRO_QUESOS.Roles_Por_Funcionalidades DROP CONSTRAINT FK_Roles_Por_Funcionalidades_Funcionalidades

ALTER TABLE CUATRO_QUESOS.Roles_Por_Funcionalidades DROP CONSTRAINT FK_Roles_Por_Funcionalidades_Roles

ALTER TABLE CUATRO_QUESOS.Turnos DROP CONSTRAINT FK_Turnos_Afiliados

ALTER TABLE CUATRO_QUESOS.Turnos DROP CONSTRAINT FK_Turnos_Bonos_Consulta

ALTER TABLE CUATRO_QUESOS.Turnos DROP CONSTRAINT FK_Turnos_Medicos

ALTER TABLE CUATRO_QUESOS.Usuarios_Por_Rol DROP CONSTRAINT FK_Usuarios_Por_Rol_Roles

ALTER TABLE CUATRO_QUESOS.Usuarios_Por_Rol DROP CONSTRAINT FK_Usuarios_Por_Rol_Usuarios



--  Drop Tables, Stored Procedures and Views 

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CUATRO_QUESOS.Afiliados') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE CUATRO_QUESOS.Afiliados
;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CUATRO_QUESOS.Bonos') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE CUATRO_QUESOS.Bonos
;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CUATRO_QUESOS.Bonos_Consulta') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE CUATRO_QUESOS.Bonos_Consulta
;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CUATRO_QUESOS.Bonos_Farmacia') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE CUATRO_QUESOS.Bonos_Farmacia
;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CUATRO_QUESOS.Bonos_Planes_Habilitados') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE CUATRO_QUESOS.Bonos_Planes_Habilitados
;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CUATRO_QUESOS.Cambios_Plan') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE CUATRO_QUESOS.Cambios_Plan
;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CUATRO_QUESOS.Compra') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE CUATRO_QUESOS.Compra
;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CUATRO_QUESOS.Consultas') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE CUATRO_QUESOS.Consultas
;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CUATRO_QUESOS.Dias_Atencion') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE CUATRO_QUESOS.Dias_Atencion
;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CUATRO_QUESOS.Especialidades') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE CUATRO_QUESOS.Especialidades
;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CUATRO_QUESOS.Especialidades_Medicos') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE CUATRO_QUESOS.Especialidades_Medicos
;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CUATRO_QUESOS.Funcionalidades') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE CUATRO_QUESOS.Funcionalidades
;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CUATRO_QUESOS.Medicamentos') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE CUATRO_QUESOS.Medicamentos
;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CUATRO_QUESOS.Medicamentos_Por_Consulta') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE CUATRO_QUESOS.Medicamentos_Por_Consulta
;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CUATRO_QUESOS.Medicos') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE CUATRO_QUESOS.Medicos
;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CUATRO_QUESOS.Planes_Medicos') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE CUATRO_QUESOS.Planes_Medicos
;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CUATRO_QUESOS.Roles') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE CUATRO_QUESOS.Roles
;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CUATRO_QUESOS.Roles_Por_Funcionalidades') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE CUATRO_QUESOS.Roles_Por_Funcionalidades
;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CUATRO_QUESOS.Tipos_Especialidades') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE CUATRO_QUESOS.Tipos_Especialidades
;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CUATRO_QUESOS.Turnos') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE CUATRO_QUESOS.Turnos
;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CUATRO_QUESOS.Usuarios') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE CUATRO_QUESOS.Usuarios
;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('CUATRO_QUESOS.Usuarios_Por_Rol') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE CUATRO_QUESOS.Usuarios_Por_Rol
;

DROP SCHEMA [CUATRO_QUESOS]
GO
*/


CREATE SCHEMA [CUATRO_QUESOS] AUTHORIZATION [gd]
GO

--  Create Tables 
CREATE TABLE CUATRO_QUESOS.Afiliados ( 
	Nro_Afiliado numeric(18) NOT NULL,
	Nombre varchar(255) NOT NULL,
	Apellido varchar(255) NOT NULL,
	Sexo char(1) NOT NULL,
	Tipo_Doc varchar(3) NOT NULL,
	Nro_Doc numeric(18) NOT NULL,
	Direccion varchar(255) NOT NULL,
	Mail varchar(255),
	Telefono numeric(18) NOT NULL,
	Fecha_Nac datetime NOT NULL,
	Cod_Plan numeric(18) NOT NULL,
	Estado_Civil varchar(255) NOT NULL,
	Nro_Titular numeric(18),
	Nro_Conyuge numeric(18),
	Fecha_Baja datetime,
	Nro_Consulta int
)
;

CREATE TABLE CUATRO_QUESOS.Bonos ( 
	Numero numeric(18) NOT NULL,
	Fecha_Impresion datetime NOT NULL,
	Compra_Bono_Fecha datetime NOT NULL,
	Nro_Afiliado numeric(18) NOT NULL,
	Cod_Plan numeric(18) NOT NULL,
	Id_Compra numeric(18) NOT NULL
)
;

CREATE TABLE CUATRO_QUESOS.Bonos_Consulta ( 
	Bono_Numero numeric(18) NOT NULL,
	Nro_Consulta int
)
;

CREATE TABLE CUATRO_QUESOS.Bonos_Farmacia ( 
	Bono_Numero numeric(18) NOT NULL,
	Fecha_Vencimiento datetime NOT NULL
)
;

CREATE TABLE CUATRO_QUESOS.Bonos_Planes_Habilitados ( 
	Cod_Plan numeric(18) NOT NULL,
	Bono_Numero numeric(18) NOT NULL
)
;

CREATE TABLE CUATRO_QUESOS.Cambios_Plan ( 
	Nro_Afiliado numeric(18) NOT NULL,
	Fecha datetime NOT NULL,
	Plan_Origen numeric(18) NOT NULL,
	Plan_Destino numeric(18) NOT NULL,
	Motivo varchar(255)
)
;

CREATE TABLE CUATRO_QUESOS.Compra ( 
	Id_Compra numeric(18) NOT NULL,
	Nro_Afiliado numeric(18) NOT NULL,
	Fecha datetime NOT NULL,
	Cantidad_Comprada numeric(18) NOT NULL,
	Monto numeric(18) NOT NULL
)
;

CREATE TABLE CUATRO_QUESOS.Consultas ( 
	Id_Consulta numeric(18) NOT NULL,
	Nro_Turno numeric(18) NOT NULL,
	Fecha datetime NOT NULL,
	Sintomas varchar(255) NOT NULL,
	Enfermedades varchar(255) NOT NULL
)
;

CREATE TABLE CUATRO_QUESOS.Dias_Atencion ( 
	Id_Medico numeric(18) NOT NULL,
	Nombre_Dia varchar(9) NOT NULL,
	Hora_Desde time(4) NOT NULL,
	Hora_Hasta time(4) NOT NULL
)
;

CREATE TABLE CUATRO_QUESOS.Especialidades ( 
	Codigo numeric(18) NOT NULL,
	Descripcion varchar(255) NOT NULL,
	Tipo_Codigo numeric(18) NOT NULL
)
;

CREATE TABLE CUATRO_QUESOS.Especialidades_Medicos ( 
	Id_Medico numeric(18) NOT NULL,
	Cod_Especialidad numeric(18) NOT NULL
)
;

CREATE TABLE CUATRO_QUESOS.Funcionalidades ( 
	Id_Funcionalidad numeric(18) NOT NULL,
	Descripcion varchar(255)
)
;

CREATE TABLE CUATRO_QUESOS.Medicamentos ( 
	Id_Medicamento numeric(18) NOT NULL,
	Descripcion varchar(255) NOT NULL
)
;

CREATE TABLE CUATRO_QUESOS.Medicamentos_Por_Consulta ( 
	Id_Consulta numeric(18) NOT NULL,
	Id_Medicamento numeric(18) NOT NULL,
	Nro_Bono_Farmacia numeric(18) NOT NULL,
	Cantidad bigint NOT NULL
)
;

CREATE TABLE CUATRO_QUESOS.Medicos ( 
	Id_Medico numeric(18) NOT NULL,
	Nombre varchar(255) NOT NULL,
	Apellido varchar(255) NOT NULL,
	Tipo_Doc varchar(3) NOT NULL,
	Nro_Doc numeric(18) NOT NULL,
	Direccion varchar(255) NOT NULL,
	Telefono numeric(18) NOT NULL,
	Mail varchar(255) NOT NULL,
	Fecha_Nac datetime NOT NULL,
	Nro_Matricula numeric(18),
	Fecha_Atencion_Desde datetime NOT NULL,
	Fecha_Atencion_Hasta datetime NOT NULL
)
;

CREATE TABLE CUATRO_QUESOS.Planes_Medicos ( 
	Codigo numeric(18) NOT NULL,
	Descripcion varchar(255) NOT NULL,
	Precio_Bono_Consulta numeric(18) NOT NULL,
	Precio_Bono_Farmacia numeric(18) NOT NULL
)
;

CREATE TABLE CUATRO_QUESOS.Roles ( 
	Id_Rol numeric(18) NOT NULL,
	Habilitado bit NOT NULL,
	Nombre varchar(50) NOT NULL,
	Descripcion varchar(50)
)
;

CREATE TABLE CUATRO_QUESOS.Roles_Por_Funcionalidades ( 
	Id_Rol numeric(18) NOT NULL,
	Id_Funcionalidad numeric(18) NOT NULL
)
;

CREATE TABLE CUATRO_QUESOS.Tipos_Especialidades ( 
	Codigo numeric(18) NOT NULL,
	Descripcion varchar(255) NOT NULL
)
;

CREATE TABLE CUATRO_QUESOS.Turnos ( 
	Numero numeric(18) NOT NULL,
	Fecha datetime NOT NULL,
	Nro_Afiliado numeric(18) NOT NULL,
	Id_Medico numeric(18) NOT NULL,
	Nro_Bono_Consulta numeric(18) NOT NULL
)
;

CREATE TABLE CUATRO_QUESOS.Usuarios ( 
	Username nvarchar(20) NOT NULL,
	Password nvarchar(255) NOT NULL,
	Intentos_Fallidos tinyint
)
;

CREATE TABLE CUATRO_QUESOS.Usuarios_Por_Rol ( 
	Username nvarchar(20) NOT NULL,
	Id_Rol numeric(18) NOT NULL
)
;


--  Create Primary Key Constraints 
ALTER TABLE CUATRO_QUESOS.Afiliados ADD CONSTRAINT PK_Afiliados 
	PRIMARY KEY CLUSTERED (Nro_Afiliado)
;

ALTER TABLE CUATRO_QUESOS.Bonos ADD CONSTRAINT PK_Bonos 
	PRIMARY KEY CLUSTERED (Numero)
;

ALTER TABLE CUATRO_QUESOS.Bonos_Consulta ADD CONSTRAINT PK_Bonos_Consulta 
	PRIMARY KEY CLUSTERED (Bono_Numero)
;

ALTER TABLE CUATRO_QUESOS.Bonos_Farmacia ADD CONSTRAINT PK_Bonos_Farmacia 
	PRIMARY KEY CLUSTERED (Bono_Numero)
;

ALTER TABLE CUATRO_QUESOS.Bonos_Planes_Habilitados ADD CONSTRAINT PK_Bonos_Planes_Habilitados 
	PRIMARY KEY CLUSTERED (Cod_Plan, Bono_Numero)
;

ALTER TABLE CUATRO_QUESOS.Cambios_Plan ADD CONSTRAINT PK_Cambios_Plan 
	PRIMARY KEY CLUSTERED (Nro_Afiliado, Fecha)
;

ALTER TABLE CUATRO_QUESOS.Compra ADD CONSTRAINT PK_Compra 
	PRIMARY KEY CLUSTERED (Id_Compra)
;

ALTER TABLE CUATRO_QUESOS.Consultas ADD CONSTRAINT PK_Consultas 
	PRIMARY KEY CLUSTERED (Id_Consulta)
;

ALTER TABLE CUATRO_QUESOS.Dias_Atencion ADD CONSTRAINT PK_Dias_Atencion 
	PRIMARY KEY CLUSTERED (Id_Medico, Nombre_Dia)
;

ALTER TABLE CUATRO_QUESOS.Especialidades ADD CONSTRAINT PK_Especialidades 
	PRIMARY KEY CLUSTERED (Codigo)
;

ALTER TABLE CUATRO_QUESOS.Especialidades_Medicos ADD CONSTRAINT PK_Especialidades_Medicos 
	PRIMARY KEY CLUSTERED (Id_Medico, Cod_Especialidad)
;

ALTER TABLE CUATRO_QUESOS.Funcionalidades ADD CONSTRAINT PK_Funcionalidades 
	PRIMARY KEY CLUSTERED (Id_Funcionalidad)
;

ALTER TABLE CUATRO_QUESOS.Medicamentos ADD CONSTRAINT PK_Medicamentos 
	PRIMARY KEY CLUSTERED (Id_Medicamento)
;

ALTER TABLE CUATRO_QUESOS.Medicamentos_Por_Consulta ADD CONSTRAINT PK_Medicamentos_Por_Consulta 
	PRIMARY KEY CLUSTERED (Id_Consulta, Id_Medicamento, Nro_Bono_Farmacia)
;

ALTER TABLE CUATRO_QUESOS.Medicos ADD CONSTRAINT PK_Medicos 
	PRIMARY KEY CLUSTERED (Id_Medico)
;

ALTER TABLE CUATRO_QUESOS.Planes_Medicos ADD CONSTRAINT PK_Planes_Medicos 
	PRIMARY KEY CLUSTERED (Codigo)
;

ALTER TABLE CUATRO_QUESOS.Roles ADD CONSTRAINT PK_Roles 
	PRIMARY KEY CLUSTERED (Id_Rol)
;

ALTER TABLE CUATRO_QUESOS.Roles_Por_Funcionalidades ADD CONSTRAINT PK_Roles_Por_Funcionalidades 
	PRIMARY KEY CLUSTERED (Id_Rol, Id_Funcionalidad)
;

ALTER TABLE CUATRO_QUESOS.Tipos_Especialidades ADD CONSTRAINT PK_Tipos_Especialidades 
	PRIMARY KEY CLUSTERED (Codigo)
;

ALTER TABLE CUATRO_QUESOS.Turnos ADD CONSTRAINT PK_Turnos 
	PRIMARY KEY CLUSTERED (Numero)
;

ALTER TABLE CUATRO_QUESOS.Usuarios ADD CONSTRAINT PK_Usuarios 
	PRIMARY KEY CLUSTERED (Username)
;

ALTER TABLE CUATRO_QUESOS.Usuarios_Por_Rol ADD CONSTRAINT PK_Usuarios_Por_Rol 
	PRIMARY KEY CLUSTERED (Username, Id_Rol)
;



--  Create Foreign Key Constraints 
ALTER TABLE CUATRO_QUESOS.Afiliados ADD CONSTRAINT FK_Nro_Conyuge 
	FOREIGN KEY (Nro_Conyuge) REFERENCES CUATRO_QUESOS.Afiliados (Nro_Afiliado)
;

ALTER TABLE CUATRO_QUESOS.Afiliados ADD CONSTRAINT FK_Nro_Titular 
	FOREIGN KEY (Nro_Titular) REFERENCES CUATRO_QUESOS.Afiliados (Nro_Afiliado)
;

ALTER TABLE CUATRO_QUESOS.Bonos ADD CONSTRAINT FK_Bonos_Afiliados 
	FOREIGN KEY (Nro_Afiliado) REFERENCES CUATRO_QUESOS.Afiliados (Nro_Afiliado)
	ON UPDATE CASCADE
;

ALTER TABLE CUATRO_QUESOS.Bonos ADD CONSTRAINT FK_Bonos_Compra 
	FOREIGN KEY (Id_Compra) REFERENCES CUATRO_QUESOS.Compra (Id_Compra)
	ON UPDATE CASCADE
;

ALTER TABLE CUATRO_QUESOS.Bonos ADD CONSTRAINT FK_Bonos_Planes_Medicos 
	FOREIGN KEY (Cod_Plan) REFERENCES CUATRO_QUESOS.Planes_Medicos (Codigo)
;

ALTER TABLE CUATRO_QUESOS.Bonos_Consulta ADD CONSTRAINT FK_Bonos_Consulta_Bonos 
	FOREIGN KEY (Bono_Numero) REFERENCES CUATRO_QUESOS.Bonos (Numero)
	ON UPDATE CASCADE
;

ALTER TABLE CUATRO_QUESOS.Bonos_Farmacia ADD CONSTRAINT FK_Bonos_Farmacia_Bonos 
	FOREIGN KEY (Bono_Numero) REFERENCES CUATRO_QUESOS.Bonos (Numero)
	ON UPDATE CASCADE
;

ALTER TABLE CUATRO_QUESOS.Bonos_Planes_Habilitados ADD CONSTRAINT FK_Bonos_Planes_Habilitados_Bonos 
	FOREIGN KEY (Bono_Numero) REFERENCES CUATRO_QUESOS.Bonos (Numero)
	ON UPDATE CASCADE
;

ALTER TABLE CUATRO_QUESOS.Bonos_Planes_Habilitados ADD CONSTRAINT FK_Bonos_Planes_Habilitados_Planes_Medicos 
	FOREIGN KEY (Cod_Plan) REFERENCES CUATRO_QUESOS.Planes_Medicos (Codigo)
	ON UPDATE CASCADE
;

ALTER TABLE CUATRO_QUESOS.Cambios_Plan ADD CONSTRAINT FK_Afiliado 
	FOREIGN KEY (Nro_Afiliado) REFERENCES CUATRO_QUESOS.Afiliados (Nro_Afiliado)
	ON UPDATE CASCADE
;

ALTER TABLE CUATRO_QUESOS.Cambios_Plan ADD CONSTRAINT FK_Plan_Destino 
	FOREIGN KEY (Plan_Destino) REFERENCES CUATRO_QUESOS.Planes_Medicos (Codigo)
;

ALTER TABLE CUATRO_QUESOS.Cambios_Plan ADD CONSTRAINT FK_Plan_Origen 
	FOREIGN KEY (Plan_Origen) REFERENCES CUATRO_QUESOS.Planes_Medicos (Codigo)
;

ALTER TABLE CUATRO_QUESOS.Compra ADD CONSTRAINT FK_Compra_Afiliados 
	FOREIGN KEY (Nro_Afiliado) REFERENCES CUATRO_QUESOS.Afiliados (Nro_Afiliado)
;

ALTER TABLE CUATRO_QUESOS.Consultas ADD CONSTRAINT FK_Consultas_Turnos 
	FOREIGN KEY (Nro_Turno) REFERENCES CUATRO_QUESOS.Turnos (Numero)
	ON UPDATE CASCADE
;

ALTER TABLE CUATRO_QUESOS.Dias_Atencion ADD CONSTRAINT FK_Dias_Atencion_Medicos 
	FOREIGN KEY (Id_Medico) REFERENCES CUATRO_QUESOS.Medicos (Id_Medico)
	ON UPDATE CASCADE
;

ALTER TABLE CUATRO_QUESOS.Especialidades ADD CONSTRAINT FK_Especialidades_Tipos_Especialidades 
	FOREIGN KEY (Tipo_Codigo) REFERENCES CUATRO_QUESOS.Tipos_Especialidades (Codigo)
	ON UPDATE CASCADE
;

ALTER TABLE CUATRO_QUESOS.Especialidades_Medicos ADD CONSTRAINT FK_Especialidades_Medicos_Especialidades 
	FOREIGN KEY (Cod_Especialidad) REFERENCES CUATRO_QUESOS.Especialidades (Codigo)
	ON UPDATE CASCADE
;

ALTER TABLE CUATRO_QUESOS.Especialidades_Medicos ADD CONSTRAINT FK_Especialidades_Medicos_Medicos 
	FOREIGN KEY (Id_Medico) REFERENCES CUATRO_QUESOS.Medicos (Id_Medico)
	ON UPDATE CASCADE
;

ALTER TABLE CUATRO_QUESOS.Medicamentos_Por_Consulta ADD CONSTRAINT FK_Medicamentos_Por_Consulta_Bonos_Farmacia 
	FOREIGN KEY (Nro_Bono_Farmacia) REFERENCES CUATRO_QUESOS.Bonos_Farmacia (Bono_Numero)
	ON UPDATE CASCADE
;

ALTER TABLE CUATRO_QUESOS.Medicamentos_Por_Consulta ADD CONSTRAINT FK_Medicamentos_Por_Consulta_Consultas 
	FOREIGN KEY (Id_Consulta) REFERENCES CUATRO_QUESOS.Consultas (Id_Consulta)
	ON UPDATE CASCADE
;

ALTER TABLE CUATRO_QUESOS.Medicamentos_Por_Consulta ADD CONSTRAINT FK_Medicamentos_Por_Consulta_Medicamentos 
	FOREIGN KEY (Id_Medicamento) REFERENCES CUATRO_QUESOS.Medicamentos (Id_Medicamento)
	ON UPDATE CASCADE
;

ALTER TABLE CUATRO_QUESOS.Roles_Por_Funcionalidades ADD CONSTRAINT FK_Roles_Por_Funcionalidades_Funcionalidades 
	FOREIGN KEY (Id_Funcionalidad) REFERENCES CUATRO_QUESOS.Funcionalidades (Id_Funcionalidad)
	ON DELETE CASCADE ON UPDATE CASCADE
;

ALTER TABLE CUATRO_QUESOS.Roles_Por_Funcionalidades ADD CONSTRAINT FK_Roles_Por_Funcionalidades_Roles 
	FOREIGN KEY (Id_Rol) REFERENCES CUATRO_QUESOS.Roles (Id_Rol)
	ON DELETE CASCADE ON UPDATE CASCADE
;

ALTER TABLE CUATRO_QUESOS.Turnos ADD CONSTRAINT FK_Turnos_Afiliados 
	FOREIGN KEY (Nro_Afiliado) REFERENCES CUATRO_QUESOS.Afiliados (Nro_Afiliado)
;

ALTER TABLE CUATRO_QUESOS.Turnos ADD CONSTRAINT FK_Turnos_Bonos_Consulta 
	FOREIGN KEY (Nro_Bono_Consulta) REFERENCES CUATRO_QUESOS.Bonos_Consulta (Bono_Numero)
;

ALTER TABLE CUATRO_QUESOS.Turnos ADD CONSTRAINT FK_Turnos_Medicos 
	FOREIGN KEY (Id_Medico) REFERENCES CUATRO_QUESOS.Medicos (Id_Medico)
	ON UPDATE CASCADE
;

ALTER TABLE CUATRO_QUESOS.Usuarios_Por_Rol ADD CONSTRAINT FK_Usuarios_Por_Rol_Roles 
	FOREIGN KEY (Id_Rol) REFERENCES CUATRO_QUESOS.Roles (Id_Rol)
	ON DELETE CASCADE ON UPDATE CASCADE
;

ALTER TABLE CUATRO_QUESOS.Usuarios_Por_Rol ADD CONSTRAINT FK_Usuarios_Por_Rol_Usuarios 
	FOREIGN KEY (Username) REFERENCES CUATRO_QUESOS.Usuarios (Username)
	ON DELETE CASCADE ON UPDATE CASCADE
;